# Guia de In√≠cio - Nexa App

> **Seu primeiro dia no projeto**  
> **Siga este guia passo a passo para come√ßar a desenvolver**

---

## üìã Checklist de Onboarding

- [ ] Ambiente configurado
- [ ] C√≥digo rodando localmente
- [ ] Entendeu a arquitetura b√°sica
- [ ] Criou sua primeira feature de teste
- [ ] Fez seu primeiro commit

**Tempo estimado:** 2-3 horas

---

## 1Ô∏è‚É£ Setup do Ambiente (30 min)

### Pr√©-requisitos

```bash
# Verificar Flutter
flutter doctor

# Deve mostrar:
# [‚úì] Flutter (Channel stable, 3.x.x)
# [‚úì] Android toolchain
# [‚úì] Xcode (para iOS, se Mac)
# [‚úì] VS Code / Android Studio
```

Se algo falhar:

- **Flutter:**
- **Android SDK:** Via Android Studio
- **Xcode:** Via App Store (Mac apenas)

---

### Instala√ß√£o do Projeto

```bash
# 1. Clonar reposit√≥rio
git clone <url-do-repo>
cd nexa_app

# 2. Instalar depend√™ncias
flutter pub get

# 3. Gerar c√≥digo (Drift database)
dart run build_runner build --delete-conflicting-outputs

# 4. Verificar se compila
flutter analyze

# 5. Executar app
flutter run
```

**Resultado esperado:**

- ‚úÖ App abre no emulador/dispositivo
- ‚úÖ Tela de splash aparece
- ‚úÖ Login funciona (use credenciais de teste)

---

## 2Ô∏è‚É£ Explorar o App (30 min)

### Navega√ß√£o Guiada

1. **Splash** ‚Üí Aguarde carregar
2. **Login** ‚Üí Entre com:
   - Matr√≠cula: `TESTE001`
   - Senha: `senha123`
3. **Home** ‚Üí Explore o dashboard
4. **Abrir Turno** ‚Üí Clique no bot√£o "Turno"
   - Selecione ve√≠culo
   - Selecione equipe
   - Adicione 2+ eletricistas
   - Marque um motorista
   - Informe KM inicial
5. **Checklists** ‚Üí Complete:
   - Checklist Veicular
   - Checklist EPC
   - Checklist EPI (todos eletricistas)
6. **Servi√ßos** ‚Üí Adicione servi√ßos
7. **Fechar Turno** ‚Üí Finalize o turno

**Objetivo:** Entender o fluxo completo do app!

---

## 3Ô∏è‚É£ Entender a Arquitetura (45 min)

### Leitura Obrigat√≥ria

Leia nesta ordem (30 min total):

1. **[OVERVIEW.md](OVERVIEW.md)** (10 min)

   - J√° leu? ‚úÖ √ìtimo!
   - N√£o leu? Volte e leia primeiro!

2. **[DIAGRAMS.md](DIAGRAMS.md)** (15 min)

   - Visualize os fluxos
   - Entenda as camadas
   - Veja comunica√ß√£o entre m√≥dulos

3. **[ARCHITECTURE.md](ARCHITECTURE.md) - Se√ß√µes principais** (15 min)
   - Estrutura de Pastas
   - Organiza√ß√£o por M√≥dulos
   - Fluxo de Dados

### Exerc√≠cio Pr√°tico (15 min)

Explore o c√≥digo seguindo este roteiro:

```bash
1. Abra: lib/presentation/home/home_page.dart
   ‚îî‚îÄ Veja como a UI √© constru√≠da

2. Abra: lib/presentation/home/home_controller.dart
   ‚îî‚îÄ Veja como o estado √© gerenciado

3. Abra: lib/presentation/home/home_binding.dart
   ‚îî‚îÄ Veja como depend√™ncias s√£o injetadas

4. Abra: lib/data/repositories/turno_repo.dart
   ‚îî‚îÄ Veja como dados s√£o acessados

5. Abra: lib/data/datasources/local/turno_dao.dart
   ‚îî‚îÄ Veja queries do banco
```

**Objetivo:** Entender o fluxo Page ‚Üí Controller ‚Üí Repository ‚Üí DAO ‚Üí Database

---

## 4Ô∏è‚É£ Criar Sua Primeira Feature (45 min)

Vamos criar um m√≥dulo simples de **"Perfil do Usu√°rio"**!

### Passo 1: Criar Estrutura (5 min)

```bash
# Criar pasta do m√≥dulo
mkdir -p lib/presentation/perfil

# Criar arquivos
touch lib/presentation/perfil/perfil_controller.dart
touch lib/presentation/perfil/perfil_page.dart
touch lib/presentation/perfil/perfil_binding.dart
```

### Passo 2: Criar Controller (10 min)

Abra `lib/presentation/perfil/perfil_controller.dart` e copie do template:

```dart
import 'package:get/get.dart';
import 'package:nexa_app/core/security/session_manager.dart';
import 'package:nexa_app/core/utils/logger/app_logger.dart';

/// Controller do perfil do usu√°rio.
class PerfilController extends GetxController {
  final SessionManager _sessionManager = Get.find<SessionManager>();

  // Estado
  final RxBool isLoading = false.obs;

  // Getters
  String get nomeUsuario => _sessionManager.usuario?.nome ?? 'Usu√°rio';
  String get matricula => _sessionManager.usuario?.matricula ?? 'N/A';

  @override
  void onInit() {
    super.onInit();
    AppLogger.i('PerfilController inicializado', tag: 'PerfilController');
  }

  // A√ß√£o de logout
  Future<void> logout() async {
    try {
      await _sessionManager.logout();
      Get.offAllNamed('/login');
    } catch (e) {
      Get.snackbar('Erro', 'Erro ao fazer logout');
    }
  }
}
```

### Passo 3: Criar Page (15 min)

Abra `lib/presentation/perfil/perfil_page.dart`:

```dart
import 'package:flutter/material.dart';
import 'package:get/get.dart';
import 'package:nexa_app/presentation/perfil/perfil_controller.dart';

class PerfilPage extends GetView<PerfilController> {
  const PerfilPage({super.key});

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: const Text('Perfil'),
        centerTitle: true,
      ),
      body: Padding(
        padding: const EdgeInsets.all(24),
        child: Column(
          children: [
            // Avatar
            const CircleAvatar(
              radius: 50,
              child: Icon(Icons.person, size: 50),
            ),

            const SizedBox(height: 24),

            // Nome
            Text(
              controller.nomeUsuario,
              style: const TextStyle(
                fontSize: 24,
                fontWeight: FontWeight.bold,
              ),
            ),

            const SizedBox(height: 8),

            // Matr√≠cula
            Text(
              'Matr√≠cula: ${controller.matricula}',
              style: TextStyle(
                fontSize: 16,
                color: Colors.grey[600],
              ),
            ),

            const SizedBox(height: 48),

            // Bot√£o de logout
            SizedBox(
              width: double.infinity,
              child: ElevatedButton.icon(
                onPressed: controller.logout,
                icon: const Icon(Icons.exit_to_app),
                label: const Text('Sair'),
                style: ElevatedButton.styleFrom(
                  backgroundColor: Colors.red,
                  padding: const EdgeInsets.symmetric(vertical: 16),
                ),
              ),
            ),
          ],
        ),
      ),
    );
  }
}
```

### Passo 4: Criar Binding (5 min)

Abra `lib/presentation/perfil/perfil_binding.dart`:

```dart
import 'package:get/get.dart';
import 'package:nexa_app/presentation/perfil/perfil_controller.dart';

class PerfilBinding extends Bindings {
  @override
  void dependencies() {
    Get.lazyPut(() => PerfilController());
  }
}
```

### Passo 5: Registrar Rota (5 min)

Abra `lib/app/routes/routes.dart` e adicione:

```dart
static const perfil = '/perfil';
```

Abra `lib/app/routes/app_pages.dart` e adicione:

```dart
import 'package:nexa_app/presentation/perfil/perfil_page.dart';
import 'package:nexa_app/presentation/perfil/perfil_binding.dart';

// Na lista de p√°ginas:
GetPage(
  name: Routes.perfil,
  page: () => const PerfilPage(),
  binding: PerfilBinding(),
  middlewares: [AuthMiddleware()],  // Rota protegida
),
```

### Passo 6: Adicionar Navega√ß√£o (5 min)

Na `lib/presentation/home/home_page.dart`, adicione um bot√£o:

```dart
// No grid de funcionalidades ou em algum lugar vis√≠vel:
ElevatedButton.icon(
  onPressed: () => Get.toNamed(Routes.perfil),
  icon: const Icon(Icons.person),
  label: const Text('Perfil'),
)
```

### Passo 7: Testar! (5 min)

```bash
# Hot reload
r

# Ou hot restart
R

# Ou executar novamente
flutter run
```

**Testar:**

- [ ] Bot√£o "Perfil" aparece na home
- [ ] Ao clicar, navega para tela de perfil
- [ ] Mostra nome e matr√≠cula do usu√°rio
- [ ] Bot√£o "Sair" funciona

---

## 5Ô∏è‚É£ Seu Primeiro Commit (15 min)

### Boas Pr√°ticas Git

```bash
# 1. Criar branch
git checkout -b feature/tela-perfil

# 2. Adicionar arquivos
git add lib/presentation/perfil/
git add lib/app/routes/

# 3. Commit descritivo
git commit -m "feat(perfil): adicionar tela de perfil do usu√°rio

- Criar PerfilController com dados do SessionManager
- Criar PerfilPage com avatar e informa√ß√µes
- Criar PerfilBinding para DI
- Registrar rota /perfil
- Adicionar navega√ß√£o na home"

# 4. Push
git push origin feature/tela-perfil

# 5. Criar Pull Request no GitHub/GitLab
```

---

## üìö Recursos para Aprendizado

### GetX

```dart
// Estado reativo
final RxInt counter = 0.obs;
counter.value++;  // UI atualiza automaticamente

// Observar mudan√ßas
Obx(() => Text('${counter.value}'))

// Navega√ß√£o
Get.toNamed('/rota');
Get.back();
Get.offAllNamed('/home');

// Dependency Injection
Get.lazyPut(() => Controller());
final ctrl = Get.find<Controller>();
```

**Documenta√ß√£o:** https://github.com/jonataslaw/getx

---

### Drift (Database)

```dart
// Definir tabela
class Turno extends Table {
  IntColumn get id => integer().autoIncrement()();
  TextColumn get nome => text()();
}

// Query
final turnos = await select(turnoTable).get();

// Insert
await into(turnoTable).insert(turno);

// Update
await update(turnoTable).replace(turno);

// Delete
await delete(turnoTable).delete(turno);
```

**Documenta√ß√£o:** https://drift.simonbinder.eu/

---

## üéØ Desafios Pr√°ticos

Ap√≥s criar a tela de perfil, tente:

### Desafio 1: Adicionar Campo de Email

- Adicionar campo `email` no `UsuarioDto`
- Atualizar tabela no Drift
- Exibir na tela de perfil

### Desafio 2: Adicionar Foto de Perfil

- Usar `image_picker` para selecionar foto
- Salvar localmente
- Exibir no CircleAvatar

### Desafio 3: Editar Perfil

- Criar tela de edi√ß√£o
- Permitir alterar nome
- Salvar no banco
- Validar formul√°rio

---

## üêõ Erros Comuns e Solu√ß√µes

### 1. "Instance not registered"

```dart
// ‚ùå ERRADO
class MyController extends GetxController {
  final MyService _service = Get.find<MyService>();  // Falha!
}

// ‚úÖ CORRETO
class MyController extends GetxController {
  final MyService _service;

  MyController({required MyService service}) : _service = service;
}

// No Binding:
Get.lazyPut(() => MyService());
Get.lazyPut(() => MyController(service: Get.find()));
```

### 2. "Obx est√° reconstruindo tudo"

```dart
// ‚ùå RUIM
Obx(() => EntirePageWidget())

// ‚úÖ BOM
Obx(() {
  final specificValue = controller.value.value;
  return SmallWidget(value: specificValue);
})
```

### 3. "Null check operator used on a null value"

```dart
// ‚ùå PERIGOSO
final nome = usuario!.nome;

// ‚úÖ SEGURO
final nome = usuario?.nome ?? 'Padr√£o';
```

---

## üìñ Fluxo de Desenvolvimento

### Criar Nova Feature

```
1. Planejar
   ‚îî‚îÄ Definir m√≥dulo/feature
   ‚îî‚îÄ Listar requisitos
   ‚îî‚îÄ Verificar depend√™ncias

2. Criar Estrutura
   ‚îî‚îÄ presentation/[modulo]/[feature]/
   ‚îî‚îÄ controller.dart, page.dart, binding.dart

3. Implementar Backend
   ‚îî‚îÄ DTO (se necess√°rio)
   ‚îî‚îÄ DAO (se necess√°rio)
   ‚îî‚îÄ Repository (se necess√°rio)

4. Implementar Frontend
   ‚îî‚îÄ Controller (estado e l√≥gica)
   ‚îî‚îÄ Page (UI)
   ‚îî‚îÄ Widgets (componentes)

5. Registrar
   ‚îî‚îÄ Binding (DI)
   ‚îî‚îÄ Route (navega√ß√£o)

6. Testar
   ‚îî‚îÄ Funcionalidade completa
   ‚îî‚îÄ Casos extremos
   ‚îî‚îÄ Performance

7. Documentar
   ‚îî‚îÄ Coment√°rios no c√≥digo
   ‚îî‚îÄ README do m√≥dulo (se complexo)

8. Code Review
   ‚îî‚îÄ Criar PR
   ‚îî‚îÄ Aguardar aprova√ß√£o
   ‚îî‚îÄ Mergear
```

---

## üé® Padr√µes do Projeto

### Controllers

```dart
// SEMPRE:
‚úÖ Inje√ß√£o de depend√™ncias via construtor
‚úÖ Estado reativo com Rx
‚úÖ Logs em a√ß√µes importantes
‚úÖ Tratamento de erros
‚úÖ Cleanup no onClose()

// NUNCA:
‚ùå L√≥gica de UI no controller
‚ùå Acesso direto ao DAO (use Repository)
‚ùå Get.find() no construtor
‚ùå Vari√°veis globais
```

### Pages

```dart
// SEMPRE:
‚úÖ GetView<Controller> ou GetResponsiveView
‚úÖ Const onde poss√≠vel
‚úÖ M√©todos privados para organizar (_buildXxx)
‚úÖ Obx granulares (pequenos e focados)

// NUNCA:
‚ùå L√≥gica de neg√≥cio na Page
‚ùå Obx gigantes
‚ùå setState (use GetX!)
```

### Organiza√ß√£o

```dart
// ‚úÖ BOM: Tudo junto
presentation/perfil/
‚îú‚îÄ‚îÄ perfil_controller.dart
‚îú‚îÄ‚îÄ perfil_page.dart
‚îî‚îÄ‚îÄ perfil_binding.dart

// ‚ùå RUIM: Separado
controllers/perfil_controller.dart
pages/perfil_page.dart
bindings/perfil_binding.dart
```

---

## üß™ Debug e Troubleshooting

### Ver Logs

```dart
// No c√≥digo, use:
import 'package:nexa_app/core/utils/logger/app_logger.dart';

AppLogger.d('Debug message', tag: 'MinhaClasse');
AppLogger.i('Info message', tag: 'MinhaClasse');
AppLogger.w('Warning message', tag: 'MinhaClasse');
AppLogger.e('Error message', tag: 'MinhaClasse', error: e);
```

### DevTools

```bash
# Abrir Flutter DevTools
flutter pub global activate devtools
flutter pub global run devtools

# Em outro terminal, com app rodando:
flutter run --observatory-port=9200
```

**Use para:**

- üîç Inspecionar widget tree
- üìä Ver performance (rebuilds)
- üíæ Explorar banco de dados
- üêõ Debugar estado

---

## üìã Checklist de Feature Completa

Antes de abrir PR, verificar:

### C√≥digo

- [ ] Segue [STYLE_GUIDE.md](STYLE_GUIDE.md)
- [ ] Imports organizados
- [ ] C√≥digo formatado (`dart format`)
- [ ] Sem warnings (`flutter analyze`)
- [ ] Null safety respeitado

### Funcionalidade

- [ ] Feature funciona como esperado
- [ ] Casos extremos tratados
- [ ] Erros com feedback adequado
- [ ] Loading states implementados
- [ ] Navega√ß√£o funcionando

### Performance

- [ ] Obx granulares
- [ ] Const widgets usados
- [ ] Sem rebuilds desnecess√°rios
- [ ] ListView.builder para listas

### Documenta√ß√£o

- [ ] Coment√°rios em c√≥digo complexo
- [ ] M√©todos p√∫blicos documentados
- [ ] TODOs com contexto (se houver)

### Git

- [ ] Branch criada
- [ ] Commits sem√¢nticos
- [ ] PR com descri√ß√£o clara

---

## üéì Materiais de Estudo

### Essenciais (Leia primeiro)

1. **[ARCHITECTURE.md](ARCHITECTURE.md)**

   - Arquitetura completa
   - Camadas e responsabilidades
   - Organiza√ß√£o por m√≥dulos

2. **[STYLE_GUIDE.md](STYLE_GUIDE.md)**

   - Padr√µes de c√≥digo
   - Conven√ß√µes de nomenclatura
   - Boas pr√°ticas GetX

3. **[MODULE_TEMPLATE.md](MODULE_TEMPLATE.md)**
   - Templates prontos
   - Exemplos de c√≥digo
   - Estrutura de m√≥dulos

### Complementares (Consulte quando necess√°rio)

4. **[DIAGRAMS.md](DIAGRAMS.md)**

   - Diagramas visuais
   - Fluxos de dados
   - Comunica√ß√£o entre camadas

5. **[MIGRATION_GUIDE.md](MIGRATION_GUIDE.md)**
   - Hist√≥rico de migra√ß√£o
   - Scripts √∫teis
   - Troubleshooting

---

## üí° Dicas para Produtividade

### Atalhos √öteis (VS Code/Cursor)

```
Ctrl + P        ‚Üí Buscar arquivo
Ctrl + Shift + P ‚Üí Command Palette
Ctrl + .        ‚Üí Quick fixes
Ctrl + Space    ‚Üí Autocomplete
F12             ‚Üí Ir para defini√ß√£o
Shift + F12     ‚Üí Ver refer√™ncias
```

### Snippets √öteis

Crie snippets para templates comuns:

- `getc` ‚Üí GetX Controller template
- `getp` ‚Üí GetX Page template
- `getb` ‚Üí GetX Binding template

### Hot Reload vs Hot Restart

```
r  ‚Üí Hot Reload (r√°pido, mant√©m estado)
R  ‚Üí Hot Restart (completo, limpa estado)
q  ‚Üí Quit
```

**Quando usar cada um:**

- **Hot Reload (r)**: Mudan√ßas em UI, cores, textos
- **Hot Restart (R)**: Mudan√ßas em l√≥gica, estado inicial, bindings

---

## üîç Explorando o C√≥digo

### Principais Arquivos

```
lib/
‚îú‚îÄ‚îÄ main.dart                              ‚Üê COMECE AQUI
‚îÇ                                           Inicializa√ß√£o do app
‚îÇ
‚îú‚îÄ‚îÄ app/app.dart                           ‚Üê MaterialApp e configura√ß√µes
‚îÇ
‚îú‚îÄ‚îÄ shared/bindings/initial_binding.dart   ‚Üê Depend√™ncias globais
‚îÇ
‚îú‚îÄ‚îÄ core/database/app_database.dart        ‚Üê Defini√ß√£o do banco
‚îÇ
‚îú‚îÄ‚îÄ presentation/
‚îÇ   ‚îú‚îÄ‚îÄ home/                              ‚Üê Dashboard principal
‚îÇ   ‚îú‚îÄ‚îÄ login/                             ‚Üê Autentica√ß√£o
‚îÇ   ‚îî‚îÄ‚îÄ turno/                             ‚Üê Feature principal
‚îÇ       ‚îú‚îÄ‚îÄ abrir/                         ‚Üê Abertura de turno
‚îÇ       ‚îú‚îÄ‚îÄ checklist/                     ‚Üê Sistema de checklists
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ veicular/
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ epc/
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ epi/
‚îÇ       ‚îî‚îÄ‚îÄ servicos/                      ‚Üê Gest√£o de servi√ßos
```

### Arquivos que Voc√™ Vai Mexer Muito

1. **Controllers** (`*_controller.dart`)
   - Onde voc√™ coloca l√≥gica de estado
2. **Pages** (`*_page.dart`)
   - Onde voc√™ desenha a UI
3. **Repositories** (`data/repositories/*`)
   - Onde voc√™ acessa dados
4. **Routes** (`app/routes/app_pages.dart`)
   - Sempre que criar nova tela

---

## üéØ Metas de Aprendizado

### Semana 1

- [ ] Ambiente configurado
- [ ] App rodando
- [ ] Primeira feature criada
- [ ] Primeiro PR aprovado

### Semana 2

- [ ] Arquitetura compreendida
- [ ] Criou 3+ features
- [ ] Contribuiu para code review
- [ ] Ajudou outro dev

### M√™s 1

- [ ] Dom√≠nio completo do projeto
- [ ] Capaz de criar features complexas
- [ ] Refer√™ncia para novos devs
- [ ] Prop√¥s melhorias na arquitetura

---

## üìû Suporte

### Onde Encontrar Ajuda

1. **Documenta√ß√£o** ‚Üí [`docs/`](.)
2. **Code Review** ‚Üí Pe√ßa feedback ao time
3. **Pair Programming** ‚Üí Trabalhe com dev s√™nior
4. **Issues** ‚Üí Verifique issues conhecidos

### Perguntas Frequentes

**Q: Onde criar nova feature?**  
A: Em `lib/presentation/[modulo]/[feature]/`

**Q: Como acessar banco de dados?**  
A: Via Repository ‚Üí DAO ‚Üí Drift

**Q: Como adicionar nova rota?**  
A: Registrar em `app/routes/app_pages.dart`

**Q: Como fazer loading?**  
A: `RxBool isLoading` + `Obx(() => if (loading) ...)`

**Q: GetX ou Bloc/Riverpod?**  
A: Projeto usa **GetX** - mantenha consist√™ncia

---

## üéâ Parab√©ns!

Voc√™ completou o onboarding! Agora voc√™ est√° pronto para:

- ‚úÖ Criar novas features
- ‚úÖ Contribuir para o projeto
- ‚úÖ Fazer code reviews
- ‚úÖ Ajudar outros devs

**Pr√≥ximo passo:** Escolha uma issue e comece a codificar! üíª

---

**Precisa de ajuda?** Consulte a [documenta√ß√£o completa](.) ou pergunte ao time! üöÄ
